<template>
  <Header title="–û–±—â–∏–µ –∏–¥–µ–∏">
    <UButton
      size="lg"
      variant="solid"
      color="secondary"
      class="w-full md:w-fit"
      icon="i-lucide-lightbulb"
      :label="t('app.create.idea.button')"
      @click="modalCreateIdea.open()"
    />
  </Header>

  <Content>
    <UContainer class="mb-20 max-w-lg">
      <div class="flex flex-col gap-6">
        <div class="my-8 w-full grid grid-cols-2 gap-2">
          <div class="px-4 flex flex-col gap-2 items-center">
            <div class="flex flex-row gap-2 items-center">
              <UIcon name="fluent-emoji-flat:magic-wand" class="size-12" />
              <h2 class="text-4xl font-bold text-secondary">
                46
              </h2>
            </div>
            <div class="text-sm leading-4 text-muted">
              –ò–¥–µ–π –≤ –æ—á–µ—Ä–µ–¥–∏
            </div>
          </div>
          <div class="px-4 flex flex-col gap-2 items-center text-center">
            <div class="flex flex-row gap-2 items-center">
              <UIcon name="fluent-emoji-flat:party-popper" class="size-12" />
              <h2 class="text-4xl font-bold text-secondary">
                8
              </h2>
            </div>
            <div class="text-sm leading-4 text-muted">
              –ò–¥–µ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
            </div>
          </div>
        </div>

        <NuxtLink
          v-for="idea in ideas"
          :key="idea.id"
          :to="`/idea/${idea.id}`"
        >
          <ActiveCard class="flex flex-col gap-5">
            <p class="text-lg leading-6">
              {{ idea.text }}
            </p>

            <div class="flex flex-row justify-between items-center">
              <UAvatarGroup :max="4" size="sm">
                <UAvatar
                  v-for="like in idea.likes"
                  :key="like.id"
                  :src="like.avatar"
                  alt=""
                />
              </UAvatarGroup>

              <UButton
                variant="outline"
                color="neutral"
                size="md"
                trailing-icon="fluent-emoji-flat:red-heart"
              >
                –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∏–¥–µ—é
              </UButton>
            </div>
          </ActiveCard>
        </NuxtLink>
      </div>
    </UContainer>
  </Content>
</template>

<script setup lang="ts">
import { ModalCreateIdea } from '#components'

useHead({
  title: '–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–¥–µ—é',
})

const { t } = useI18n()

const overlay = useOverlay()
const modalCreateIdea = overlay.create(ModalCreateIdea)

const ideas = computed(() => [
  {
    id: '2422',
    text: '–ù–µ —É–¥–æ–±–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∑–∞–∫–∞–∑–µ —É IT –æ—Ç–¥–µ–ª–∞. –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º –ø—Ä—è–º–æ —Ç—É—Ç –∑–∞–ø—Ä–æ—Å, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–∞–π—Ç–∏ –∑–∞–∫–∞–∑ –ø–æ –Ω–æ–º–µ—Ä—É ü•∫',
    likes: generateLikes(6),
  },
  {
    id: '875484',
    text: '–•–æ—á–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —á—Ç–æ–±—ã —è –º–æ–≥ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ –ø–æ—Ç–æ–º (–Ω–∞ –Ω–µ–¥–µ–ª—é –≤–ø–µ—Ä–µ–¥). –ü–æ—Ç–æ–º –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º.',
    likes: generateLikes(6),
  },
  {
    id: '32435454g3',
    text: '–ì–æ —Å–¥–µ–ª–∞–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–æ-–Ω–æ–≤–æ–º—É - –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –±–æ–Ω—É—Å—ã, –∞ –∑–∞ –≤—Å–µ –ø–æ–∫—É–ø–∫–∏ –¥—Ä—É–≥–∞. –ë–æ–ª—å—à–µ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –±—É–¥–µ—Ç –∑–≤–∞—Ç—å –¥—Ä—É–∑–µ–π!',
    likes: generateLikes(4),
  },
  {
    id: '243243',
    text: '–ê –¥–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏? –ö–ª–∏–µ–Ω—Ç—ã –≤—ã–±–∏—Ä–∞—é—Ç —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –∏ –ø–æ–ª—É—á–∞—é—Ç —Å–∫–∏–¥–∫—É. –í—Å–µ –¥–æ–≤–æ–ª—å–Ω—ã –±—É–¥—É—Ç!',
    likes: generateLikes(3),
  },
  {
    id: '324354543',
    text: '–ü—Ä–µ–¥–ª–∞–≥–∞—é –æ—Ç–∫—Ä—ã—Ç—å –∫—É—Ä—Å—ã –ø–æ —Å—É—à–∏! –ö–ª–∏–µ–Ω—Ç—ã —Å–º–æ–≥—É—Ç –Ω–∞—É—á–∏—Ç—å—Å—è –≥–æ—Ç–æ–≤–∏—Ç—å, –ø–æ–ª—É—á–∞—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ —Å–∫–∏–¥–∫–∏ –Ω–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã. –ü–æ—á–µ–º—É –±—ã –Ω–µ—Ç?',
    likes: generateLikes(3),
  },
  {
    id: '432432',
    text: '–ü—Ä–µ–¥–ª–∞–≥–∞—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–±–æ—Ä—ã —Å —É—á–µ—Ç–æ–º –∫–∞–ª–æ—Ä–∏–π –∏ –ë–ñ–£. –ú–æ–∂–Ω–æ –¥–∞–∂–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ–Ω—é —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å. –°–µ–π—á–∞—Å —ç—Ç–æ –æ—á–µ–Ω—å –∞–∫—Ç—É–∞–ª—å–Ω–æ!',
    likes: generateLikes(2),
  },
  {
    id: '3243543',
    text: '–°–¥–µ–ª–∞—Ç—å –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–æ–ª–ª–æ–≤! –ö–ª–∏–µ–Ω—Ç—ã —Å–∞–º–∏ –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å —Å–≤–æ–∏ –Ω–∞–±–æ—Ä—ã, –∞ —è –∏–º —Å–æ–≤–µ—Ç—ã –¥–∞–≤–∞—Ç—å –±—É–¥—É. –¢–∏–ø–∞ –∏–≥—Ä–∞ —Ç–∞–∫–∞—è –∫—É–ª–∏–Ω–∞—Ä–Ω–∞—è.',
    likes: generateLikes(2),
  },
  {
    id: '34324',
    text: '–Ø —Ç—É—Ç –ø–æ–¥—É–º–∞–ª - –∞ –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫–∏–µ –∫–æ—Ä–æ–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã? –ö–ª–∏–µ–Ω—Ç—ã –∏—Ö –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç - –ø–æ–ª—É—á–∞—é—Ç —Å–∫–∏–¥–∫—É. –ò –¥–ª—è —ç–∫–æ–ª–æ–≥–∏–∏ —Ö–æ—Ä–æ—à–æ, –∏ –ª—é–¥—è–º –ø–ª—é—Å.',
    likes: generateLikes(2),
  },
  {
    id: '43432',
    text: '–ê —á–µ –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫—É—é —à—Ç—É–∫—É - –±–æ–Ω—É—Å—ã –Ω–µ —Ç–æ–ª—å–∫–æ —Å–µ–±–µ –∫–æ–ø–∏—à—å, –Ω–æ –∏ –≤—Å–µ–π —Å–µ–º—å–µ? –¢–∏–ø–∞ —Å–µ–º–µ–π–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç. –ò –Ω–∞–±–æ—Ä—ã —Å–µ–º–µ–π–Ω—ã–µ —Å–¥–µ–ª–∞–µ–º –æ—Å–æ–±—ã–µ. –ö–∞–∫ –¥—É–º–∞–µ—Ç–µ?',
    likes: generateLikes(1),
  },
  {
    id: '123',
    text: '–†–µ–±—è—Ç, –∞ –¥–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å AR? –¢–∏–ø–∞ –Ω–∞–≤–µ–ª –∫–∞–º–µ—Ä—É –Ω–∞ QR-–∫–æ–¥, –∞ —Ç–∞–º —Ç–≤–æ—ë —Å—É—à–∏ –∫—Ä—É—Ç–∏—Ç—å—Å—è –∏ –≤—Å–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –≤–∏–¥–Ω–æ! –ü—Ä–∏–∫–æ–ª—å–Ω–∞—è –∂–µ —Ñ–∏—á–∞ –±—É–¥–µ—Ç!',
    likes: generateLikes(1),
  },
])

const user = useUserStore()

function generateLikes(amount: number) {
  const likes = []

  for (let i = 0; i < amount; i++) {
    const randUser = user.users[getRandInteger(0, user.users.length - 1)]
    if (!randUser) {
      continue
    }

    likes.push({
      id: randUser.id,
      avatar: randUser.avatar ?? undefined,
    })
  }

  return likes
}
</script>
